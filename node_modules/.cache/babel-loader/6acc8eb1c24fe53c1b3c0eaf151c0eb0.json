{"ast":null,"code":"import _asyncToGenerator from\"/Users/satheeshkumarb/careth backup copy/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/satheeshkumarb/careth backup copy/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/satheeshkumarb/careth backup copy/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import\"./Rentals.css\";import{Link}from\"react-router-dom\";import{useLocation}from\"react-router\";import logo from\"../images/CarEth_black.png\";import{ConnectButton,Icon,Button,useNotification}from\"web3uikit\";import RentalsMap from\"../components/RentalsMap\";import{useState,useEffect}from\"react\";import{useMoralis,useWeb3ExecuteFunction}from\"react-moralis\";import User from\"../components/User\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Rentals=function Rentals(){var _useLocation=useLocation(),searchFilters=_useLocation.state;var _useState=useState(),_useState2=_slicedToArray(_useState,2),highLight=_useState2[0],setHighLight=_useState2[1];var _useMoralis=useMoralis(),Moralis=_useMoralis.Moralis,account=_useMoralis.account;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),rentalsList=_useState4[0],setRentalsList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),coOrdinates=_useState6[0],setCoOrdinates=_useState6[1];var contractProcessor=useWeb3ExecuteFunction();var dispatch=useNotification();var handleSuccess=function handleSuccess(){dispatch({type:\"success\",message:\"Nice! You can pick up the car from \".concat(searchFilters.location,\"!!\"),title:\"Booking Succesful\",position:\"topl\"});};var handleError=function handleError(msg){dispatch({type:\"error\",message:\"\".concat(msg),title:\"Booking failed\",position:\"topl\"});};var handleNoAccount=function handleNoAccount(){dispatch({type:\"error\",message:\"You need to connect to your wallet to book a car rental\",title:\"Not Connected\",position:\"topL\"});};useEffect(function(){function fetchRentalsList(){return _fetchRentalsList.apply(this,arguments);}function _fetchRentalsList(){_fetchRentalsList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var Rentals,query,result,cords;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Rentals=Moralis.Object.extend(\"Rentals\");query=new Moralis.Query(Rentals);query.equalTo(\"city\",searchFilters.location);query.equalTo(\"cartype\",searchFilters.cartype);_context.next=6;return query.find();case 6:result=_context.sent;cords=[];result.forEach(function(e){cords.push({lat:e.attributes.lat,lng:e.attributes.long});});setCoOrdinates(cords);setRentalsList(result);case 11:case\"end\":return _context.stop();}}},_callee);}));return _fetchRentalsList.apply(this,arguments);}fetchRentalsList();},[searchFilters]);var bookRental=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(start,end,id,dayPrice){var arr,dt,options;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:for(arr=[],dt=new Date(start);dt<=end;dt.setDate(dt.getDate()+1)){arr.push(new Date(dt).toISOString().slice(0,10));}options={contractAddress:\"0x0712BFcf499cB258217bed8AE1D378695e0d6F37\",functionName:\"addDatesBooked\",abi:[{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"string[]\",\"name\":\"newBookings\",\"type\":\"string[]\"}],\"name\":\"addDatesBooked\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"}],params:{id:id,newBookings:arr},msgValue:Moralis.Units.ETH(dayPrice*0.01*arr.length)};console.log(arr);_context2.next=5;return contractProcessor.fetch({params:options,onSuccess:function onSuccess(){handleSuccess();},onError:function onError(error){handleError(error.data.message);}});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function bookRental(_x,_x2,_x3,_x4){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topBanner\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{className:\"logo\",src:logo,alt:\"logo\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchReminder\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"filter\",children:searchFilters.location}),/*#__PURE__*/_jsx(\"div\",{className:\"vl\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter\",children:\"\\n           \".concat(searchFilters.pickUpDate.toLocaleString(\"default\",{month:\"short\"}),\" \\n           \").concat(searchFilters.pickUpDate.toLocaleString(\"default\",{day:\"2-digit\"}),\" \\n           - \\n           \").concat(searchFilters.returnDate.toLocaleString(\"default\",{month:\"short\"}),\" \\n           \").concat(searchFilters.returnDate.toLocaleString(\"default\",{day:\"2-digit\"}),\"\\n          \")}),/*#__PURE__*/_jsx(\"div\",{className:\"vl\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter\",children:[searchFilters.cartype,\" Car Type\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"searchFiltersIcon\",children:/*#__PURE__*/_jsx(Icon,{fill:\"#ffffff\",size:20,svg:\"search\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lrContainers\",children:[account&&/*#__PURE__*/_jsx(User,{account:account}),/*#__PURE__*/_jsx(ConnectButton,{})]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"line\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rentalsContent\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rentalsContentL\",children:[\"Available For Your Location\",rentalsList&&rentalsList.map(function(e,i){var x=e.attributes.pricePerday;var y=x/100;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{className:\"line2\"}),/*#__PURE__*/_jsxs(\"div\",{className:highLight==i?\"rentalDivH\":\"rentalDiv\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"rentalImg\",src:e.attributes.imgUrl}),/*#__PURE__*/_jsxs(\"div\",{className:\"rentalInfo\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rentalTitle\",children:e.attributes.name}),/*#__PURE__*/_jsx(\"div\",{className:\"rentalDesc\",children:e.attributes.unoDescription}),/*#__PURE__*/_jsx(\"div\",{className:\"rentalDesc\",children:e.attributes.dosDescription}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottomButton\",children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){if(account){bookRental(searchFilters.pickUpDate,searchFilters.returnDate,e.attributes.uid_decimal.value.$numberDecimal,Number(e.attributes.pricePerday_decimal.value.$numberDecimal));}else{handleNoAccount();}},text:\"Pickup This Car\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[/*#__PURE__*/_jsx(Icon,{fill:\"#808080\",size:10,svg:\"eth\"}),\" \",y,\" / Day\"]})]})]})]})]});})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rentalsContentR\",children:/*#__PURE__*/_jsx(RentalsMap,{locations:coOrdinates,setHighLight:setHighLight})})]})]});};export default Rentals;","map":{"version":3,"sources":["/Users/satheeshkumarb/careth backup copy/src/pages/Rentals.js"],"names":["React","Link","useLocation","logo","ConnectButton","Icon","Button","useNotification","RentalsMap","useState","useEffect","useMoralis","useWeb3ExecuteFunction","User","Rentals","searchFilters","state","highLight","setHighLight","Moralis","account","rentalsList","setRentalsList","coOrdinates","setCoOrdinates","contractProcessor","dispatch","handleSuccess","type","message","location","title","position","handleError","msg","handleNoAccount","fetchRentalsList","Object","extend","query","Query","equalTo","cartype","find","result","cords","forEach","e","push","lat","attributes","lng","long","bookRental","start","end","id","dayPrice","arr","dt","Date","setDate","getDate","toISOString","slice","options","contractAddress","functionName","abi","params","newBookings","msgValue","Units","ETH","length","console","log","fetch","onSuccess","onError","error","data","pickUpDate","toLocaleString","month","day","returnDate","map","i","x","pricePerday","y","imgUrl","name","unoDescription","dosDescription","uid_decimal","value","$numberDecimal","Number","pricePerday_decimal"],"mappings":"6XAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,eAAP,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,MAAOC,CAAAA,IAAP,KAAiB,4BAAjB,CACA,OAASC,aAAT,CAAwBC,IAAxB,CAA8BC,MAA9B,CAAsCC,eAAtC,KAA6D,WAA7D,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,UAAT,CAAqBC,sBAArB,KAAmD,eAAnD,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,C,6IAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB,iBAAiCZ,WAAW,EAA5C,CAAea,aAAf,cAAQC,KAAR,CACA,cAAkCP,QAAQ,EAA1C,wCAAOQ,SAAP,eAAkBC,YAAlB,eACA,gBAA6BP,UAAU,EAAvC,CAAQQ,OAAR,aAAQA,OAAR,CAAiBC,OAAjB,aAAiBA,OAAjB,CACA,eAAsCX,QAAQ,EAA9C,yCAAOY,WAAP,eAAoBC,cAApB,eACA,eAAsCb,QAAQ,CAAC,EAAD,CAA9C,yCAAOc,WAAP,eAAoBC,cAApB,eACA,GAAMC,CAAAA,iBAAiB,CAAGb,sBAAsB,EAAhD,CACA,GAAMc,CAAAA,QAAQ,CAAGnB,eAAe,EAAhC,CAEA,GAAMoB,CAAAA,aAAa,CAAE,QAAfA,CAAAA,aAAe,EAAM,CACzBD,QAAQ,CAAC,CACPE,IAAI,CAAE,SADC,CAEPC,OAAO,8CAAwCd,aAAa,CAACe,QAAtD,MAFA,CAGPC,KAAK,CAAE,mBAHA,CAIPC,QAAQ,CAAE,MAJH,CAAD,CAAR,CAMD,CAPD,CASA,GAAMC,CAAAA,WAAW,CAAE,QAAbA,CAAAA,WAAa,CAACC,GAAD,CAAS,CAC1BR,QAAQ,CAAC,CACPE,IAAI,CAAE,OADC,CAEPC,OAAO,WAAKK,GAAL,CAFA,CAGPH,KAAK,CAAE,gBAHA,CAIPC,QAAQ,CAAE,MAJH,CAAD,CAAR,CAMD,CAPD,CASA,GAAMG,CAAAA,eAAe,CAAE,QAAjBA,CAAAA,eAAiB,EAAM,CAC3BT,QAAQ,CAAC,CACPE,IAAI,CAAE,OADC,CAEPC,OAAO,0DAFA,CAGPE,KAAK,CAAE,eAHA,CAIPC,QAAQ,CAAE,MAJH,CAAD,CAAR,CAMD,CAPD,CASAtB,SAAS,CAAC,UAAM,SACC0B,CAAAA,gBADD,0JACd,kKACQtB,OADR,CACkBK,OAAO,CAACkB,MAAR,CAAeC,MAAf,CAAsB,SAAtB,CADlB,CAEQC,KAFR,CAEgB,GAAIpB,CAAAA,OAAO,CAACqB,KAAZ,CAAkB1B,OAAlB,CAFhB,CAGEyB,KAAK,CAACE,OAAN,CAAc,MAAd,CAAsB1B,aAAa,CAACe,QAApC,EACAS,KAAK,CAACE,OAAN,CAAc,SAAd,CAAyB1B,aAAa,CAAC2B,OAAvC,EAJF,sBAMuBH,CAAAA,KAAK,CAACI,IAAN,EANvB,QAMQC,MANR,eAQMC,KARN,CAQc,EARd,CASED,MAAM,CAACE,OAAP,CAAe,SAACC,CAAD,CAAO,CACpBF,KAAK,CAACG,IAAN,CAAW,CAAEC,GAAG,CAAEF,CAAC,CAACG,UAAF,CAAaD,GAApB,CAAyBE,GAAG,CAAEJ,CAAC,CAACG,UAAF,CAAaE,IAA3C,CAAX,EACD,CAFD,EAIA5B,cAAc,CAACqB,KAAD,CAAd,CAEAvB,cAAc,CAACsB,MAAD,CAAd,CAfF,uDADc,mDAoBdR,gBAAgB,GAEjB,CAtBQ,CAsBN,CAACrB,aAAD,CAtBM,CAAT,CAyBA,GAAMsC,CAAAA,UAAU,0FAAG,kBAAeC,KAAf,CAAsBC,GAAtB,CAA2BC,EAA3B,CAA+BC,QAA/B,yIACjB,IACMC,GADN,CACY,EADZ,CACgBC,EADhB,CACqB,GAAIC,CAAAA,IAAJ,CAASN,KAAT,CADrB,CAEEK,EAAE,EAAIJ,GAFR,CAGEI,EAAE,CAACE,OAAH,CAAWF,EAAE,CAACG,OAAH,GAAe,CAA1B,CAHF,CAIE,CACEJ,GAAG,CAACV,IAAJ,CAAS,GAAIY,CAAAA,IAAJ,CAASD,EAAT,EAAaI,WAAb,GAA2BC,KAA3B,CAAiC,CAAjC,CAAoC,EAApC,CAAT,EACD,CAEGC,OATW,CASD,CACZC,eAAe,CAAE,4CADL,CAEZC,YAAY,CAAE,gBAFF,CAGZC,GAAG,CAAE,CACH,CACE,SAAU,CACR,CACE,eAAgB,SADlB,CAEE,OAAQ,IAFV,CAGE,OAAQ,SAHV,CADQ,CAMR,CACE,eAAgB,UADlB,CAEE,OAAQ,aAFV,CAGE,OAAQ,UAHV,CANQ,CADZ,CAaE,OAAQ,gBAbV,CAcE,UAAW,EAdb,CAeE,kBAAmB,SAfrB,CAgBE,OAAQ,UAhBV,CADG,CAHO,CAuBZC,MAAM,CAAE,CACNb,EAAE,CAAEA,EADE,CAENc,WAAW,CAAEZ,GAFP,CAvBI,CA2BZa,QAAQ,CAAEpD,OAAO,CAACqD,KAAR,CAAcC,GAAd,CAAkBhB,QAAQ,CAAG,IAAX,CAAkBC,GAAG,CAACgB,MAAxC,CA3BE,CATC,CAsCfC,OAAO,CAACC,GAAR,CAAYlB,GAAZ,EAtCe,uBAwCTjC,CAAAA,iBAAiB,CAACoD,KAAlB,CAAwB,CAC5BR,MAAM,CAAEJ,OADoB,CAE5Ba,SAAS,CAAE,oBAAM,CACfnD,aAAa,GACd,CAJ2B,CAK5BoD,OAAO,CAAE,iBAACC,KAAD,CAAW,CAClB/C,WAAW,CAAC+C,KAAK,CAACC,IAAN,CAAWpD,OAAZ,CAAX,CACD,CAP2B,CAAxB,CAxCS,yDAAH,kBAAVwB,CAAAA,UAAU,wDAAhB,CAmDA,mBACE,wCACC,aAAK,SAAS,CAAC,WAAf,wBACE,kCACE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,uBACE,YAAK,SAAS,CAAC,MAAf,CAAsB,GAAG,CAAElD,IAA3B,CAAiC,GAAG,CAAC,MAArC,EADF,EADF,EADF,cAMG,aAAK,SAAS,CAAC,gBAAf,wBACE,YAAK,SAAS,CAAC,QAAf,UAAyBY,aAAa,CAACe,QAAvC,EADF,cAEE,YAAK,SAAS,CAAC,IAAf,EAFF,cAGE,YAAK,SAAS,CAAC,QAAf,iCAEGf,aAAa,CAACmE,UAAd,CAAyBC,cAAzB,CAAwC,SAAxC,CAAmD,CACnDC,KAAK,CAAE,OAD4C,CAAnD,CAFH,0BAKGrE,aAAa,CAACmE,UAAd,CAAyBC,cAAzB,CAAwC,SAAxC,CAAmD,CACnDE,GAAG,CAAE,SAD8C,CAAnD,CALH,yCASGtE,aAAa,CAACuE,UAAd,CAAyBH,cAAzB,CAAwC,SAAxC,CAAmD,CACnDC,KAAK,CAAE,OAD4C,CAAnD,CATH,0BAYGrE,aAAa,CAACuE,UAAd,CAAyBH,cAAzB,CAAwC,SAAxC,CAAmD,CACnDE,GAAG,CAAE,SAD8C,CAAnD,CAZH,kBAHF,cAoBE,YAAK,SAAS,CAAC,IAAf,EApBF,cAqBE,aAAK,SAAS,CAAC,QAAf,WAAyBtE,aAAa,CAAC2B,OAAvC,eArBF,cAsBE,YAAK,SAAS,CAAC,mBAAf,uBACE,KAAC,IAAD,EAAM,IAAI,CAAC,SAAX,CAAqB,IAAI,CAAE,EAA3B,CAA+B,GAAG,CAAC,QAAnC,EADF,EAtBF,GANH,cAgCG,aAAK,SAAS,CAAC,cAAf,WACGtB,OAAO,eACR,KAAC,IAAD,EAAM,OAAO,CAAIA,OAAjB,EAFF,cAIC,KAAC,aAAD,IAJD,GAhCH,GADD,cAyCC,WAAI,SAAS,CAAC,MAAd,EAzCD,cA0CC,aAAK,SAAS,CAAC,gBAAf,wBACE,aAAK,SAAS,CAAC,iBAAf,yCAEGC,WAAW,EACZA,WAAW,CAACkE,GAAZ,CAAgB,SAACxC,CAAD,CAAIyC,CAAJ,CAAU,CACzB,GAAIC,CAAAA,CAAC,CAAG1C,CAAC,CAACG,UAAF,CAAawC,WAArB,CACA,GAAIC,CAAAA,CAAC,CAAGF,CAAC,CAAC,GAAV,CACC,mBACE,wCACG,WAAI,SAAS,CAAC,OAAd,EADH,cAEG,aAAK,SAAS,CAAExE,SAAS,EAAIuE,CAAb,CAAiB,YAAjB,CAAgC,WAAhD,wBACE,YAAK,SAAS,CAAC,WAAf,CAA2B,GAAG,CAAEzC,CAAC,CAACG,UAAF,CAAa0C,MAA7C,EADF,cAEE,aAAK,SAAS,CAAC,YAAf,wBACE,YAAK,SAAS,CAAC,aAAf,UAA8B7C,CAAC,CAACG,UAAF,CAAa2C,IAA3C,EADF,cAEE,YAAK,SAAS,CAAC,YAAf,UACG9C,CAAC,CAACG,UAAF,CAAa4C,cADhB,EAFF,cAKE,YAAK,SAAS,CAAC,YAAf,UACG/C,CAAC,CAACG,UAAF,CAAa6C,cADhB,EALF,cAQE,aAAK,SAAS,CAAC,cAAf,wBACE,KAAC,MAAD,EACA,OAAO,CAAE,kBAAM,CACb,GAAG3E,OAAH,CAAW,CACXiC,UAAU,CACRtC,aAAa,CAACmE,UADN,CAERnE,aAAa,CAACuE,UAFN,CAGRvC,CAAC,CAACG,UAAF,CAAa8C,WAAb,CAAyBC,KAAzB,CAA+BC,cAHvB,CAIRC,MAAM,CAACpD,CAAC,CAACG,UAAF,CAAakD,mBAAb,CAAiCH,KAAjC,CAAuCC,cAAxC,CAJE,CAAV,CAKE,CANF,IAMM,CACF/D,eAAe,GAClB,CACF,CAXD,CAaA,IAAI,CAAC,iBAbL,EADF,cAeE,aAAK,SAAS,CAAC,OAAf,wBACE,KAAC,IAAD,EAAM,IAAI,CAAC,SAAX,CAAqB,IAAI,CAAE,EAA3B,CAA+B,GAAG,CAAC,KAAnC,EADF,CAC8C,GAD9C,CAEGwD,CAFH,YAfF,GARF,GAFF,GAFH,GADF,CAqCA,CAxCF,CAHF,GADF,cA8CE,YAAK,SAAS,CAAC,iBAAf,uBACE,KAAC,UAAD,EAAY,SAAS,CAAEpE,WAAvB,CAAoC,YAAY,CAAEL,YAAlD,EADF,EA9CF,GA1CD,GADF,CA+FD,CA/MD,CAiNA,cAAeJ,CAAAA,OAAf","sourcesContent":["import React from \"react\";\nimport \"./Rentals.css\";\nimport { Link } from \"react-router-dom\";\nimport { useLocation } from \"react-router\";\nimport logo from \"../images/CarEth_black.png\";\nimport { ConnectButton, Icon, Button, useNotification } from \"web3uikit\";\nimport RentalsMap from \"../components/RentalsMap\";\nimport { useState, useEffect } from \"react\";\nimport { useMoralis, useWeb3ExecuteFunction } from \"react-moralis\";\nimport User from \"../components/User\";\n\nconst Rentals = () => {\n  const { state: searchFilters } = useLocation();\n  const [highLight, setHighLight] = useState();\n  const { Moralis, account } = useMoralis();\n  const [rentalsList, setRentalsList] = useState();\n  const [coOrdinates, setCoOrdinates] = useState([]);\n  const contractProcessor = useWeb3ExecuteFunction();\n  const dispatch = useNotification();\n\n  const handleSuccess= () => {\n    dispatch({\n      type: \"success\",\n      message: `Nice! You can pick up the car from ${searchFilters.location}!!`,\n      title: \"Booking Succesful\",\n      position: \"topl\",\n    });\n  };\n\n  const handleError= (msg) => {\n    dispatch({\n      type: \"error\",\n      message: `${msg}`,\n      title: \"Booking failed\",\n      position: \"topl\",\n    });\n  };\n\n  const handleNoAccount= () => {\n    dispatch({\n      type: \"error\",\n      message: `You need to connect to your wallet to book a car rental`,\n      title: \"Not Connected\",\n      position: \"topL\",\n    });\n  };\n\n  useEffect(() => {\n    async function fetchRentalsList() {\n      const Rentals = Moralis.Object.extend(\"Rentals\");\n      const query = new Moralis.Query(Rentals);\n      query.equalTo(\"city\", searchFilters.location);\n      query.equalTo(\"cartype\", searchFilters.cartype);\n    \n      const result = await query.find();\n\n      let cords = [];\n      result.forEach((e) => {\n        cords.push({ lat: e.attributes.lat, lng: e.attributes.long });\n      });\n\n      setCoOrdinates(cords);\n\n      setRentalsList(result);\n\n\n    }\n    fetchRentalsList();\n\n  }, [searchFilters]);\n\n  \n  const bookRental = async function(start, end, id, dayPrice) {\n    for (\n      var arr = [], dt = new Date(start);\n      dt <= end;\n      dt.setDate(dt.getDate() + 1)\n    ) {\n        arr.push(new Date(dt).toISOString().slice(0, 10));\n      }\n\n      let options = {\n        contractAddress: \"0x0712BFcf499cB258217bed8AE1D378695e0d6F37\",\n        functionName: \"addDatesBooked\",\n        abi: [\n          {\n            \"inputs\": [\n              {\n                \"internalType\": \"uint256\",\n                \"name\": \"id\",\n                \"type\": \"uint256\"\n              },\n              {\n                \"internalType\": \"string[]\",\n                \"name\": \"newBookings\",\n                \"type\": \"string[]\"\n              }\n            ],\n            \"name\": \"addDatesBooked\",\n            \"outputs\": [],\n            \"stateMutability\": \"payable\",\n            \"type\": \"function\"\n          }\n        ],\n        params: {\n          id: id,\n          newBookings: arr,\n        },\n        msgValue: Moralis.Units.ETH(dayPrice * 0.01 * arr.length),\n      }\n      console.log(arr);\n\n      await contractProcessor.fetch({\n        params: options,\n        onSuccess: () => {\n          handleSuccess();\n        },\n        onError: (error) => {\n          handleError(error.data.message)\n        }\n      });\n  }\n\n  return (\n    <>\n     <div className=\"topBanner\">\n       <div>\n         <Link to=\"/\">\n           <img className=\"logo\" src={logo} alt=\"logo\"></img>\n         </Link>\n        </div>\n        <div className=\"searchReminder\">\n          <div className=\"filter\">{searchFilters.location}</div>\n          <div className=\"vl\" />\n          <div className=\"filter\">\n          {`\n           ${searchFilters.pickUpDate.toLocaleString(\"default\", {\n             month: \"short\",\n           })} \n           ${searchFilters.pickUpDate.toLocaleString(\"default\", {\n             day: \"2-digit\",\n           })} \n           - \n           ${searchFilters.returnDate.toLocaleString(\"default\", {\n             month: \"short\",\n           })} \n           ${searchFilters.returnDate.toLocaleString(\"default\", {\n             day: \"2-digit\",\n           })}\n          `}\n          </div>\n          <div className=\"vl\" />\n          <div className=\"filter\">{searchFilters.cartype} Car Type</div>\n          <div className=\"searchFiltersIcon\">\n            <Icon fill=\"#ffffff\" size={20} svg=\"search\" />\n          </div>\n        </div>\n        <div className=\"lrContainers\">\n          {account && \n          <User account = {account} />\n          }\n         <ConnectButton />\n        </div>\n     </div>\n\n     <hr className=\"line\" />\n     <div className=\"rentalsContent\">\n       <div className=\"rentalsContentL\">\n         Available For Your Location\n         {rentalsList &&\n         rentalsList.map((e, i) => {\n          var x = e.attributes.pricePerday;\n          var y = x/100;\n           return (\n             <>\n                <hr className=\"line2\" />\n                <div className={highLight == i ? \"rentalDivH\" : \"rentalDiv\"}>\n                  <img className=\"rentalImg\" src={e.attributes.imgUrl}></img>\n                  <div className=\"rentalInfo\">\n                    <div className=\"rentalTitle\">{e.attributes.name}</div>\n                    <div className=\"rentalDesc\">\n                      {e.attributes.unoDescription}\n                    </div>\n                    <div className=\"rentalDesc\">\n                      {e.attributes.dosDescription}\n                    </div>\n                    <div className=\"bottomButton\">\n                      <Button\n                      onClick={() => {\n                        if(account){\n                        bookRental(\n                          searchFilters.pickUpDate,\n                          searchFilters.returnDate,\n                          e.attributes.uid_decimal.value.$numberDecimal,\n                          Number(e.attributes.pricePerday_decimal.value.$numberDecimal)\n                        )}else{ \n                            handleNoAccount()\n                        }\n                      }\n                      }\n                      text=\"Pickup This Car\"/>\n                      <div className=\"price\">\n                        <Icon fill=\"#808080\" size={10} svg=\"eth\" />{\" \"} \n                        {y} / Day\n                      </div>\n                    </div>\n                  </div>\n                </div>\n             </>\n           );\n          })}\n       </div>\n       <div className=\"rentalsContentR\">\n         <RentalsMap locations={coOrdinates} setHighLight={setHighLight} />\n       </div>\n     </div>\n    </>\n  );\n};\n\nexport default Rentals;"]},"metadata":{},"sourceType":"module"}